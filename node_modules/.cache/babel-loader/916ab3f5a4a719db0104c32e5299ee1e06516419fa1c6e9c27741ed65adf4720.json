{"ast":null,"code":"import { createSlice } from '@reduxjs/toolkit';\nimport axios from 'axios';\nimport { setIsLoading } from './isLoading.slice';\nimport getConfig from '/src/utils/getConfig';\nexport const cart = createSlice({\n  name: 'car',\n  initialState: [],\n  reducers: {\n    setCar: function (state, action) {\n      return action.payload;\n    }\n  }\n});\nexport const getCartThunk = () => dispatch => {\n  //dispatch(setIsLoading(true));\n  return axios.get(\"https://ecommerce-api-react.herokuapp.com/api/v1/cart\", getConfig()).then(res => dispatch(setCar(res.data.data.cart.products))).finally(() => {/*dispatch(setIsLoading(false)) */});\n};\nexport const addCartThunk = obj => dispatch => {\n  return axios.post(\"https://ecommerce-api-react.herokuapp.com/api/v1/cart\", obj, getConfig()).then(() => dispatch(getCartThunk())).catch(error => {\n    console.log(error);\n  }).finally(() => {});\n};\nexport const updateCartThunk = item => dispatch => {\n  return axios.patch(\"https://ecommerce-api-react.herokuapp.com/api/v1/cart\", item, getConfig()).then(() => dispatch(getCartThunk())).finally(() => {});\n};\nexport const deleteCartThunk = id => dispatch => {\n  //dispatch(setIsLoading(true));\n  return axios.delete(`https://ecommerce-api-react.herokuapp.com/api/v1/cart/${id}`, getConfig()).then(() => dispatch(getCartThunk())).finally(() => {/*dispatch(setIsLoading(false))*/});\n};\nexport const checkoutThunk = () => dispatch => {\n  dispatch(setIsLoading(true));\n  return axios.post(\"https://ecommerce-api-react.herokuapp.com/api/v1/purchases\", {\n    street: \"Green St. 1456\",\n    colony: \"Southwest\",\n    zipCode: 12345,\n    city: \"USA\",\n    references: \"Some references\"\n  }, getConfig()).then(() => {\n    return dispatch(setCar([]));\n  }).finally(() => {\n    dispatch(setIsLoading(false));\n  }); //dispatch(setIsLoading(false))\n};\n\nexport const {\n  setCar\n} = cart.actions;\nexport default cart.reducer;","map":{"version":3,"names":["createSlice","axios","setIsLoading","getConfig","cart","name","initialState","reducers","setCar","state","action","payload","getCartThunk","dispatch","get","then","res","data","products","finally","addCartThunk","obj","post","catch","error","console","log","updateCartThunk","item","patch","deleteCartThunk","id","delete","checkoutThunk","street","colony","zipCode","city","references","actions","reducer"],"sources":["C:/Users/Ing Willmer/Desktop/SOFTWARE/hdz/src/store/slices/car.slice.jsx"],"sourcesContent":["import { createSlice } from '@reduxjs/toolkit';\r\nimport axios from 'axios';\r\nimport { setIsLoading } from './isLoading.slice';\r\nimport getConfig from '/src/utils/getConfig';\r\n\r\nexport const cart = createSlice({\r\n    name: 'car',\r\n    initialState: [],\r\n    reducers: {\r\n        setCar:function(state,action){\r\n            return action.payload\r\n        }\r\n\r\n    }\r\n})\r\nexport const getCartThunk = () => (dispatch) => {\r\n    //dispatch(setIsLoading(true));\r\n    return axios.get(\"https://ecommerce-api-react.herokuapp.com/api/v1/cart\",getConfig())\r\n        .then((res) => dispatch(setCar(res.data.data.cart.products)))\r\n        .finally(() => {/*dispatch(setIsLoading(false)) */});\r\n}\r\n\r\nexport const addCartThunk = (obj) => (dispatch) => {\r\n    \r\n    return axios.post(\"https://ecommerce-api-react.herokuapp.com/api/v1/cart\",obj,getConfig())\r\n        .then(() => dispatch(getCartThunk()))\r\n        .catch((error)=>{console.log(error)})\r\n        .finally(() => {})\r\n}\r\n\r\nexport const updateCartThunk = (item) => (dispatch) => {\r\n    \r\n    return axios.patch(\"https://ecommerce-api-react.herokuapp.com/api/v1/cart\",item,getConfig())\r\n        .then(() => dispatch(getCartThunk()))\r\n        .finally(() => {})\r\n}\r\n\r\nexport const deleteCartThunk = (id) => (dispatch) => {\r\n    //dispatch(setIsLoading(true));\r\n    return axios.delete(`https://ecommerce-api-react.herokuapp.com/api/v1/cart/${id}`,getConfig())\r\n        .then(() => dispatch(getCartThunk()))\r\n        .finally(() => {/*dispatch(setIsLoading(false))*/});\r\n}\r\n\r\nexport const checkoutThunk = () => (dispatch) => {\r\n\r\n    dispatch(setIsLoading(true));\r\n    return axios.post(\"https://ecommerce-api-react.herokuapp.com/api/v1/purchases\",{street: \"Green St. 1456\",colony: \"Southwest\",zipCode: 12345,city: \"USA\",references: \"Some references\"},getConfig())\r\n        .then(() =>{ \r\n            return dispatch(setCar([]))})\r\n        .finally(() => {dispatch(setIsLoading(false))});//dispatch(setIsLoading(false))\r\n}\r\n\r\nexport const { setCar } = cart.actions;\r\n\r\nexport default cart.reducer;\r\n"],"mappings":"AAAA,SAASA,WAAW,QAAQ,kBAAkB;AAC9C,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,YAAY,QAAQ,mBAAmB;AAChD,OAAOC,SAAS,MAAM,sBAAsB;AAE5C,OAAO,MAAMC,IAAI,GAAGJ,WAAW,CAAC;EAC5BK,IAAI,EAAE,KAAK;EACXC,YAAY,EAAE,EAAE;EAChBC,QAAQ,EAAE;IACNC,MAAM,EAAC,UAASC,KAAK,EAACC,MAAM,EAAC;MACzB,OAAOA,MAAM,CAACC,OAAO;IACzB;EAEJ;AACJ,CAAC,CAAC;AACF,OAAO,MAAMC,YAAY,GAAG,MAAOC,QAAQ,IAAK;EAC5C;EACA,OAAOZ,KAAK,CAACa,GAAG,CAAC,uDAAuD,EAACX,SAAS,EAAE,CAAC,CAChFY,IAAI,CAAEC,GAAG,IAAKH,QAAQ,CAACL,MAAM,CAACQ,GAAG,CAACC,IAAI,CAACA,IAAI,CAACb,IAAI,CAACc,QAAQ,CAAC,CAAC,CAAC,CAC5DC,OAAO,CAAC,MAAM,CAAC,mCAAmC,CAAC;AAC5D,CAAC;AAED,OAAO,MAAMC,YAAY,GAAIC,GAAG,IAAMR,QAAQ,IAAK;EAE/C,OAAOZ,KAAK,CAACqB,IAAI,CAAC,uDAAuD,EAACD,GAAG,EAAClB,SAAS,EAAE,CAAC,CACrFY,IAAI,CAAC,MAAMF,QAAQ,CAACD,YAAY,EAAE,CAAC,CAAC,CACpCW,KAAK,CAAEC,KAAK,IAAG;IAACC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;EAAA,CAAC,CAAC,CACpCL,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC;AAC1B,CAAC;AAED,OAAO,MAAMQ,eAAe,GAAIC,IAAI,IAAMf,QAAQ,IAAK;EAEnD,OAAOZ,KAAK,CAAC4B,KAAK,CAAC,uDAAuD,EAACD,IAAI,EAACzB,SAAS,EAAE,CAAC,CACvFY,IAAI,CAAC,MAAMF,QAAQ,CAACD,YAAY,EAAE,CAAC,CAAC,CACpCO,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC;AAC1B,CAAC;AAED,OAAO,MAAMW,eAAe,GAAIC,EAAE,IAAMlB,QAAQ,IAAK;EACjD;EACA,OAAOZ,KAAK,CAAC+B,MAAM,CAAE,yDAAwDD,EAAG,EAAC,EAAC5B,SAAS,EAAE,CAAC,CACzFY,IAAI,CAAC,MAAMF,QAAQ,CAACD,YAAY,EAAE,CAAC,CAAC,CACpCO,OAAO,CAAC,MAAM,CAAC,kCAAkC,CAAC;AAC3D,CAAC;AAED,OAAO,MAAMc,aAAa,GAAG,MAAOpB,QAAQ,IAAK;EAE7CA,QAAQ,CAACX,YAAY,CAAC,IAAI,CAAC,CAAC;EAC5B,OAAOD,KAAK,CAACqB,IAAI,CAAC,4DAA4D,EAAC;IAACY,MAAM,EAAE,gBAAgB;IAACC,MAAM,EAAE,WAAW;IAACC,OAAO,EAAE,KAAK;IAACC,IAAI,EAAE,KAAK;IAACC,UAAU,EAAE;EAAiB,CAAC,EAACnC,SAAS,EAAE,CAAC,CAC9LY,IAAI,CAAC,MAAK;IACP,OAAOF,QAAQ,CAACL,MAAM,CAAC,EAAE,CAAC,CAAC;EAAA,CAAC,CAAC,CAChCW,OAAO,CAAC,MAAM;IAACN,QAAQ,CAACX,YAAY,CAAC,KAAK,CAAC,CAAC;EAAA,CAAC,CAAC,CAAC;AACxD,CAAC;;AAED,OAAO,MAAM;EAAEM;AAAO,CAAC,GAAGJ,IAAI,CAACmC,OAAO;AAEtC,eAAenC,IAAI,CAACoC,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}